!function(e,t){function o(){var e,t=arguments[0]||{},o=1,r=arguments.length,i=!1;for(t.constructor==Boolean&&(i=t,t=arguments[1]||{},o=2),"object"!=typeof t&&"function"!=typeof t&&(t={}),r==o&&(t=this,--o);o<r;o++)if(null!=(e=arguments[o]))for(var n in e){var l=t[n],a=e[n];t!==a&&(i&&a&&"object"==typeof a&&!a.nodeType?t[n]=jQuery.extend(i,l||(null!=a.length?[]:{}),a):void 0!==a&&(t[n]=a))}return t}var r=function(e){var t={series:{color:["#FFCEA3","#FAE692","#C0F5A2","#78EBA8","#8CEBDB","#9EE0FF","#C4C2FF","#ECB4F4","#FFA3D1","#FEB1B1","#FFAEAB","#F0C673","#74D681","#85D6B8","#8BB6E0","#7E9BE0","#AA8BE0","#EB88D7","#F08BA9","#E87984"],itemNumber:6,data:{},itemStyle:{normal:{width:149,height:48,borderWidth:1,borderColor:"#dadada",backgroundColor:"#fff"},emphasis:{borderColor:"#3385ff",backgroundColor:"#3385ff"}},labelStyle:{normal:{position:"inside",verticalAlign:"middle",color:"#000",fontFamily:'"PingFang SC", Arial, "Microsoft YaHei", sans-serif',fontSize:12,fontWeight:400},emphasis:{color:"#fff"}},lineStyle:{normal:{width:1,color:"#dadada"},emphasis:{width:2,color:"#3385ff"}}}},o=this;return o.$element=e,o.options=t,o.$color=o.options.series.color,o.$zr=zrender.init(o.$element,o.options),o.$groups=new zrender.Group,o.$element.style.position="relative",o._tooltip(),o.w=o.$zr.getWidth(),o.h=o.$zr.getHeight(),o};r.prototype={constructor:r,_tooltip:function(){var e=this;if(!e.$element.querySelector(".charts-tooltip")){var o=t.createElement("div");o.className="charts-tooltip",e.$element.appendChild(o)}},_createRect:function(e,t,o){var r=this,i=r.options.itemStyle,n=new zrender.Rect({pnode:o,type:"rect",cursor:"pointer",shape:{cy:0,cx:0,x:e.x,y:e.y,width:i.normal.width,height:i.normal.height},style:{text:e.name,lineWidth:i.normal.borderWidth,fill:e.fill,stroke:e.stroke,textPadding:3,truncate:{outerWidth:i.normal.width,outerHeight:i.normal.height,ellipsis:"...",placeholder:"..."},textPosition:"inside",textAlign:"center",textVerticalAlign:"middle"},z:r.hierarchy,disabled:e.disabled,children:e.children,val:e.val});return"会话开始"!==e.name&&r._createLine(n.shape,t,e),n},_createLine:function(e,t,o){var r=this,i=t||null;if(null!=i&&""!=i&&void 0!=i){var n=i.x,l=i.y,a=n+i.width/2,s=l+i.height,d=e.x+e.width/2,h=e.y,c=new zrender.BezierCurve({cursor:"default",silent:!1,shape:{x1:a,y1:s,cpx1:(a+d)/2,cpy1:s,cpx2:(a+d)/2,cpy2:h,x2:d,y2:h},style:{fill:"rgba(0,0,0,0)",stroke:"#dadada",lineWidth:1,text:o.val?(o.val/r.parentCount*100).toFixed(2)+"%":" ",textPosition:"inside",textFill:"#333",textHeight:20,textLineHeight:20,textAlign:"center",textVerticalAlign:"bottom",textDistance:8,textBackgroundColor:"transparent",textBorderColor:"transparent",fontFamily:'"PingFang SC", Arial, "Microsoft YaHei", sans-serif',fontSize:12,fontWeight:400},z:0});r.groups.add(c)}},_removeOtherGroups:function(e){var t=[],o=this,r=function(e){e.group&&e.group.eachChild(function(e){e.group&&(t.push(e.group),e.group.eachChild(function(e){r(e),e.group&&t.push(e.group)}))})};r(e.pnode),t.forEach(function(e,t){e.dirty(),e.removeAll(),o.$zr.flush()})},_eachNodes:function(e,t,o){var r=this,i=new zrender.Group,n=r.options.itemStyle,l=e||r.options.data;r.groups=i,n.normal.width=(r.w-r.w/(l.length+1))/(l.length+1)>n.normal.width?n.normal.width:r.w/(l.length+1);for(var a in l){var s="会话开始"===l[a].name,d={name:l[a].name,x:s?r.w/2-n.normal.width/2:(r.w-n.normal.width*l.length)/(l.length+1)*(parseInt(a)+1)+n.normal.width*parseInt(a),y:t?50+t.y+t.height:20,fill:s?r.$color[parseInt(a)]:n.normal.backgroundColor,disabled:s,val:l[a].count,stroke:s?r.$color[parseInt(a)]:n.normal.borderColor,children:l[a].children},h=r._createRect(d,t,o);i.add(h)}o&&(o.group=i),i.eachChild(function(e){var t=e;t.on("click",function(){var e=this;if(!e.active&&e.children&&!(e.children.length<=0)){if(e.disabled||(r._removeOtherGroups(e),i.eachChild(function(e,t){"rect"==e.type&&e.active&&e.attr({active:!1,style:{fill:r.options.itemStyle.normal.backgroundColor,textFill:r.options.labelStyle.normal.color,stroke:r.options.itemStyle.normal.borderColor}})},this),e.attr({active:!0,style:{fill:r.options.itemStyle.emphasis.backgroundColor,textFill:r.options.labelStyle.emphasis.color,stroke:r.options.itemStyle.emphasis.backgroundColor}})),e.active=!0,r.parentCount=e.val,r._eachNodes(this.children,this.shape,e),r.$groups.getBoundingRect().height>r.h){var t=r.$groups.getBoundingRect().height,o=r.h/t*.9;r.adjustSize=o,r.$groups.dirty(),r.$groups.scale=[1,o,0,0],r.$zr.flush()}e.disabled||r.hierarchy++}}),t.on("mouseover",function(e){var t=r.$element.querySelector(".charts-tooltip"),o=this;if("rect"==o.type){t.style.display="block",t.style.left=o.shape.x+o.shape.width/2-t.clientWidth/2+"px";var i=o.shape.y-t.clientHeight-5;if(t.style.top=i-(i-i*(r.adjustSize||1)+(r.adjustSize?10:0))+"px",t.innerText=o.style.text,!o.disabled){if(o.active)return;o.attr({style:{fill:r.options.itemStyle.emphasis.backgroundColor,textFill:r.options.labelStyle.emphasis.color,stroke:r.options.itemStyle.emphasis.backgroundColor}}),r.$zr.flush()}}}),t.on("mouseout",function(e){var t=this;if("rect"==t.type){if(!t.disabled){if(t.active)return;t.attr({style:{fill:r.options.itemStyle.normal.backgroundColor,textFill:r.options.labelStyle.normal.color,stroke:r.options.itemStyle.normal.borderColor}}),r.$zr.flush()}r.$element.querySelector(".charts-tooltip").style.display="none"}})}),r.$groups.add(i),zrender.vector.scale(i,1,.5)},setOption:function(e){var t=this;t.options=o({},t.options.series,e),t.$color=t.options.color,t.hierarchy=0,t._eachNodes(),t.$zr.add(t.$groups)},_destroy:function(){zrender.dispose(this.$zr)}},e.treeCharts=r}(window,document);