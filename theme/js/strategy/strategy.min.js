$(function(){function e(){return Math.round(100*Math.random())}$(".toggle-btn-box").on("click",">.btn",function(){$(this).removeClass("btn-default").addClass("btn-blue").siblings().removeClass("btn-blue").addClass("btn-default")}),$(".stop-event").on("click","a,label",function(e){e.stopPropagation()});var a=echarts.init(document.getElementById("map"),"customed"),t=echarts.init(document.getElementById("cityMap"),"customed"),l=[{name:"齐齐哈尔"},{name:"盐城"},{name:"青岛"},{name:"金昌"},{name:"泉州"},{name:"拉萨"},{name:"攀枝花"},{name:"威海"},{name:"承德"},{name:"汕尾"},{name:"克拉玛依"},{name:"重庆市"}],n={"齐齐哈尔":[123.97,47.33],"盐城":[120.13,33.38],"青岛":[120.33,36.07],"金昌":[102.188043,38.520089],"泉州":[118.58,24.93],"拉萨":[91.11,29.97],"上海浦东":[121.48,31.22],"攀枝花":[101.718637,26.582347],"威海":[122.1,37.5],"承德":[117.93,40.97],"汕尾":[115.375279,22.786211],"克拉玛依":[84.77,45.59],"重庆市":[108.384366,30.439702]},o={title:{text:"全国投放热度分布",show:!0,textStyle:{fontWeight:400,fontSize:16},left:"center"},tooltip:{trigger:"item"},visualMap:{min:0,max:100,left:"left",top:"bottom",text:["高","低"]},geo:{map:"china",left:"20%",zoom:1.2,roam:!1,itemStyle:{normal:{areaColor:"#fbfbfb",borderColor:"#b9b4b7"}}},series:[{name:"供需占比",type:"effectScatter",coordinateSystem:"geo",data:function(e){for(var a=[],t=0;t<e.length;t++){var l=n[e[t].name];l&&a.push({name:e[t].name,value:l.concat(e[t].value)})}return a}(l),symbolSize:10,showEffectOn:"render",rippleEffect:{brushType:"stroke"},hoverAnimation:!0,label:{normal:{formatter:"{b}",position:"right",show:!1},emphasis:{show:!0}},itemStyle:{normal:{color:"#00fff6",shadowBlur:10,shadowColor:"#333"}}},{type:"map",mapType:"china",geoIndex:0,label:{normal:{show:!0},emphasis:{show:!0}},data:[{name:"北京",value:e()},{name:"天津",value:e()},{name:"上海",value:e()},{name:"重庆",value:e()},{name:"河北",value:e()},{name:"河南",value:e()},{name:"云南",value:e()},{name:"辽宁",value:e()},{name:"黑龙江",value:e()},{name:"湖南",value:e()},{name:"安徽",value:e()},{name:"山东",value:e()},{name:"新疆",value:e()},{name:"江苏",value:e()},{name:"浙江",value:e()},{name:"江西",value:e()},{name:"湖北",value:e()},{name:"广西",value:e()},{name:"甘肃",value:e()},{name:"山西",value:e()},{name:"内蒙古",value:e()},{name:"陕西",value:e()},{name:"吉林",value:e()},{name:"福建",value:e()},{name:"贵州",value:e()},{name:"广东",value:e()},{name:"青海",value:e()},{name:"西藏",value:e()},{name:"四川",value:e()},{name:"宁夏",value:e()},{name:"海南",value:e()},{name:"台湾",value:e()},{name:"香港",value:e()},{name:"澳门",value:e()},{name:"南海诸岛",value:e()}]}]},i={title:{text:"地级市热度分布",show:!0,textStyle:{fontWeight:400,fontSize:16},left:"center"},tooltip:{trigger:"item"},visualMap:{show:!1,min:0,max:100,left:"left",top:"bottom",text:["高","低"]},geo:{map:"广东",left:"10%",zoom:1.2,roam:!1,itemStyle:{normal:{areaColor:"#fbfbfb",borderColor:"#b9b4b7"}}},series:[{type:"map",geoIndex:0,label:{normal:{show:!0},emphasis:{show:!0}},data:[{name:"广州市",value:e()},{name:"深圳市",value:e()},{name:"东莞市",value:e()},{name:"清远市",value:e()},{name:"肇庆市",value:e()},{name:"湛江市",value:e()},{name:"茂名市",value:e()},{name:"阳江市",value:e()},{name:"云浮市",value:e()},{name:"江门市",value:e()},{name:"佛山市",value:e()},{name:"中山市",value:e()},{name:"珠海市",value:e()},{name:"惠州市",value:e()},{name:"清远市",value:e()},{name:"汕尾市",value:e()},{name:"河源市",value:e()},{name:"梅州市",value:e()},{name:"揭阳市",value:e()},{name:"潮州市",value:e()},{name:"汕头市",value:e()},{name:"韶关市",value:e()},{name:"郑州市",value:e()},{name:"商丘市",value:e()},{name:"合肥市",value:e()},{name:"北京市",value:e()},{name:"石家庄市",value:e()},{name:"西安市",value:e()}]}]};a.setOption(o),t.setOption(i),a.on("click",function(e){console.log(e);var a=e.name,l=a.split("");"市"!==l[l.length-1]&&"map"==e.seriesType&&(i.geo.map=a,t.setOption(i))});var m=echarts.init(document.getElementById("bar"),"customed"),r=echarts.init(document.getElementById("bar2"),"customed"),s=echarts.init(document.getElementById("bar3"),"customed"),u={legend:{top:"0",right:"4%",show:!0,data:["点击率","转化率"],selectedMode:"single",selected:{"点击率":!0,"转化率":!1}},tooltip:{show:!0},grid:{top:"6%",left:"3%",right:"4%",bottom:"3%",containLabel:!0},yAxis:{type:"value",boundaryGap:[0,.01]},xAxis:{type:"category",data:["搜狐汽车","太平洋汽车","网易汽车","腾讯汽车","网上车市","瓜子二手车","新浪汽车","爱卡","汽车之家","易车"]},series:[{name:"点击率",type:"bar",barWidth:10,legendHoverLink:!1,label:{normal:{show:!0,color:"#000",position:"top",distance:10}},itemStyle:{normal:{borderWidth:10,borderType:"solid",barBorderRadius:[0,2,2,0]}},data:[18203,23489,29034,104970,131744,630230,18203,23489,29034,104970].sort(function(e,a){return e-a})},{name:"转化率",type:"bar",barWidth:10,legendHoverLink:!1,label:{normal:{show:!0,color:"#000",position:"top",distance:10}},itemStyle:{normal:{borderWidth:10,borderType:"solid",barBorderRadius:[0,2,2,0]}},data:[12030,2389,29034,10490,131744,63020,18203,23489,2934,104970].sort(function(e,a){return e-a})}]};s.setOption(u,!0),u.legend.show=!1,u.series=u.series.shift(),m.setOption(u,!0),r.setOption(u,!0);var d=echarts.init(document.getElementById("graph"),"customed"),c={nodes:[{id:"0",name:"Myriel",symbolSize:28.685715,x:-336.5,y:100,attributes:{modularity_class:0}},{id:"1",name:"Napoleon",symbolSize:4,x:-418.08344,y:446.8853,attributes:{modularity_class:0}},{id:"2",name:"MlleBaptistine",symbolSize:9.485714,x:-212.76357,y:245.29176,attributes:{modularity_class:1}},{id:"3",name:"MmeMagloire",symbolSize:9.485714,x:-242.82404,y:235.26283,attributes:{modularity_class:1}},{id:"4",name:"CountessDeLo",symbolSize:24,x:-379.30386,y:429.06424,attributes:{modularity_class:0}},{id:"5",name:"Geborand",symbolSize:4,x:-417.26337,y:406.03506,attributes:{modularity_class:0}},{id:"6",name:"Champtercier",symbolSize:4,x:-332.6012,y:485.16974,attributes:{modularity_class:0}},{id:"7",name:"Cravatte",symbolSize:4,x:-382.69568,y:475.09113,attributes:{modularity_class:0}},{id:"8",name:"Count",symbolSize:4,x:-320.384,y:387.17325,attributes:{modularity_class:0}},{id:"9",name:"OldMan",symbolSize:4,x:-344.39832,y:451.16772,attributes:{modularity_class:0}}],links:[{id:"0",name:null,source:"1",target:"0",lineStyle:{normal:{}}},{id:"1",name:null,source:"2",target:"0",lineStyle:{normal:{}}},{id:"2",name:null,source:"3",target:"0",lineStyle:{normal:{}}},{id:"3",name:null,source:"3",target:"2",lineStyle:{normal:{}}},{id:"4",name:null,source:"4",target:"0",lineStyle:{normal:{}}},{id:"5",name:null,source:"5",target:"0",lineStyle:{normal:{}}},{id:"6",name:null,source:"6",target:"0",lineStyle:{normal:{}}},{id:"7",name:null,source:"7",target:"0",lineStyle:{normal:{}}},{id:"8",name:null,source:"8",target:"0",lineStyle:{normal:{}}},{id:"9",name:null,source:"9",target:"0",lineStyle:{normal:{}}},{id:"13",name:null,source:"11",target:"0",lineStyle:{normal:{}}},{id:null,name:null,source:"11",target:"2",lineStyle:{normal:{}}}]};c.nodes.forEach(function(e){e.itemStyle=null,e.value=e.symbolSize,e.symbolSize*=3,e.label={normal:{show:!0}},e.category=e.attributes.modularity_class});var b={animation:!1,series:[{type:"graph",layout:"none",data:c.nodes,links:c.links,roam:!0,focusNodeAdjacency:!0,itemStyle:{normal:{borderWidth:1,shadowColor:"rgba(0, 0, 0, 0.3)"}},label:{normal:{show:!0,color:"#fff",position:"inside",verticalAlign:"middle"},emphasis:{color:"#333"}},lineStyle:{color:"source",curveness:.3},emphasis:{lineStyle:{width:10}}}]};d.setOption(b);var v=$("#table");!function(){v.bootstrapTable({url:"../data/data.json",method:"post",dataType:"json",queryParams:function(e){return{pageSize:e.limit,pageNumber:e.offset/e.limit+1,sort:e.sort,sortOrder:e.order}},sortable:!0,sortOrder:"asc",pagination:!1,sidePagination:"server",pageNumber:1,pageSize:10,pageList:"",columns:[{field:"field2",title:"媒体主渠道",align:"center",valign:"middle"},{field:"field3",title:"投放媒体",align:"center",valign:"middle"},{field:"field8",title:"曝光量",sortable:!0,align:"center",valign:"middle"},{field:"field9",title:"点击量",sortable:!0,align:"center",valign:"middle"},{field:"field6",title:"线索量",sortable:!0,align:"center",valign:"middle"},{field:"field8",title:"转化率",sortable:!0,align:"center",valign:"middle"}]}),$(window).resize(function(){v.bootstrapTable("resetView"),$table2.bootstrapTable("resetView")})}()});